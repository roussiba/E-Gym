<div class="panel panel-default on animated fadeInLeft">
    <h2 mat-dialog-title class="pull-left"> Les Participants au programme d'entrainement</h2>
    <div class="header">{{title}}
        <h4 *ngIf="distinct == 1" class="pull-right b-4x b-info b-b">Montant Encaissé :
            {{ConvertToMoney(TotalPaiement)}}</h4>

    </div>
    <div class="panel-body">
        <mat-dialog-content>
            <section id="content">
                <section class="vbox">
                    <section class="scrollable wrapper-lg">

                        <div class="row m-b">
                            <div class="col-sm-12 col-md-12 on animated fadeInLeft">
                                <section class="panel panel-info">
                                    <div class="row wrapper">

                                        <div class="col-sm-12" *ngIf="distinct != 0">
                                            <p class="text-success">Les membres de la salle</p>
                                        </div>
                                    </div>
                                    <div class="table-responsive">
                                        <table class="table table-striped b-t b-light">
                                            <thead>
                                                <tr>

                                                    <th class="th-sortable" data-toggle="class">Prenom <span
                                                            class="th-sort"> <i class="fa fa-sort-down text"></i> <i
                                                                class="fa fa-sort-up text-active"></i> <i
                                                                class="fa fa-sort"></i> </span> </th>
                                                    <th>Nom</th>
                                                    <th>Telephone</th>
                                                    <ng-container *ngIf="distinct == 0; else elseTemplate">
                                                        <th>
                                                            <mat-checkbox class="example-margin" [checked]="allComplete"
                                                                [indeterminate]="someComplete()"
                                                                (change)="setAll($event.checked)">
                                                                Participer
                                                            </mat-checkbox>
                                                        </th>
                                                    </ng-container>
                                                    <ng-template #elseTemplate>
                                                        <th colspan="3" class="text-center">Actions</th>
                                                    </ng-template>

                                                </tr>
                                            </thead>
                                            <tbody>
                                                <ng-container *ngIf="distinct == 0; else elseTempla">
                                                    <tr *ngFor="let item of subtasks">

                                                        <td>{{item.client.prenom}}</td>
                                                        <td>{{item.client.nom}}</td>
                                                        <td>{{item.client.telephone}}</td>
                                                        <td>
                                                            <mat-checkbox [(ngModel)]="item.participed"
                                                                (ngModelChange)="updateAllComplete()">
                                                            </mat-checkbox>
                                                        </td>
                                                    </tr>
                                                    <tr *ngIf="subtasks.length == 0">
                                                        <td colspan="4" class="text-center">Pas de données</td>
                                                    </tr>
                                                </ng-container>
                                                <ng-template #elseTempla>
                                                    <tr *ngFor="let item of participants">

                                                        <td>{{item.membre.prenom}}</td>
                                                        <td>{{item.membre.nom}}</td>
                                                        <td>{{item.membre.telephone}}</td>
                                                        <td class="text-center">
                                                            <p>
                                                                <button *ngIf="!item.payed"
                                                                    routerLinkActive="router-link-active"
                                                                    (click)="paiementProgramme(item.membre.id,item.programme.training.montantAdhesion)"
                                                                    class="btn btn-default"><i
                                                                        class="fa fa-money"></i> Paiement</button>
                                                                <small *ngIf="item.payed">Le membre a payé</small>

                                                            </p>
                                                        </td>
                                                        <td class="text-center">
                                                            <p>
                                                                <button *ngIf="!item.isPresent"
                                                                    (click)="presentProgramme(item.membre.id)"
                                                                    class="btn btn-info"><i class="fa fa-user"></i>
                                                                    Présent</button>
                                                                <small *ngIf="item.isPresent">Le membre est
                                                                    présent</small>
                                                            </p>
                                                        </td>
                                                        <td class="text-center">
                                                            <p>
                                                                <button *ngIf="!item.isPresent && !item.payed"
                                                                    (click)="annulerParticipanr(item.membre.id)"
                                                                    class="btn btn-warning"><i
                                                                        class="fa fa-hand-o-down"></i> Annuler</button>
                                                            </p>
                                                        </td>
                                                    </tr>
                                                    <tr *ngIf="participants.length == 0">
                                                        <td colspan="4" class="text-center">Pas de données</td>
                                                    </tr>
                                                </ng-template>

                                            </tbody>
                                        </table>
                                    </div>
                                </section>
                               
                            </div>
                            <div *ngIf="distinct != 0" class="col-sm-12 col-md-12 on animated fadeInLeft">
                                <section class="panel panel-info">
                                    <div class="row wrapper">

                                        <div class="col-sm-12">
                                            <p class="text-info">Les membres abonnés</p>
                                        </div>
                                    </div>
                                    <div class="table-responsive">
                                        <table class="table table-striped b-t b-light">
                                            <thead>
                                                <tr>

                                                    <th class="th-sortable" data-toggle="class">Prenom <span
                                                            class="th-sort"> <i class="fa fa-sort-down text"></i> <i
                                                                class="fa fa-sort-up text-active"></i> <i
                                                                class="fa fa-sort"></i> </span> </th>
                                                    <th>Nom</th>
                                                    <th>Telephone</th>
                                                    <ng-container *ngIf="distinct == 0; else elseTemplate">
                                                        <th>
                                                            <mat-checkbox class="example-margin" [checked]="allComplete"
                                                                [indeterminate]="someComplete()"
                                                                (change)="setAll($event.checked)">
                                                                Participer
                                                            </mat-checkbox>
                                                        </th>
                                                    </ng-container>
                                                    <ng-template #elseTemplate>
                                                        <th colspan="2" class="text-center">Actions</th>
                                                    </ng-template>

                                                </tr>
                                            </thead>
                                            <tbody>
                                                <ng-container *ngIf="distinct == 0; else elseTempla">
                                                    <tr *ngFor="let item of subtasks">

                                                        <td>{{item.client.prenom}}</td>
                                                        <td>{{item.client.nom}}</td>
                                                        <td>{{item.client.telephone}}</td>
                                                        <td>
                                                            <mat-checkbox [(ngModel)]="item.participed"
                                                                (ngModelChange)="updateAllComplete()">
                                                            </mat-checkbox>
                                                        </td>
                                                    </tr>
                                                    <tr *ngIf="subtasks.length == 0">
                                                        <td colspan="4" class="text-center">Pas de données</td>
                                                    </tr>
                                                </ng-container>
                                                <ng-template #elseTempla>
                                                    <tr *ngFor="let item of participantsAbonnes">

                                                        <td>{{item.membre.prenom}}</td>
                                                        <td>{{item.membre.nom}}</td>
                                                        <td>{{item.membre.telephone}}</td>
                                                        <td class="text-center">
                                                            <p>
                                                                <button *ngIf="!item.isPresent"
                                                                    (click)="presentProgramme(item.membre.id)"
                                                                    class="btn btn-info m-r"><i class="fa fa-user"></i>
                                                                    Présent</button>
                                                                <small *ngIf="item.isPresent">Le membre est
                                                                    présent</small>
                                                            </p>
                                                        </td>
                                                        <td class="text-center">
                                                            <p>
                                                                <button *ngIf="!item.isPresent && !item.payed"
                                                                    (click)="annulerParticipanr(item.membre.id)"
                                                                    class="btn btn-warning"><i
                                                                        class="fa fa-hand-o-down"></i> Annuler</button>
                                                            </p>
                                                        </td>
                                                    </tr>
                                                    <tr *ngIf="participants.length == 0">
                                                        <td colspan="4" class="text-center">Pas de données</td>
                                                    </tr>
                                                </ng-template>

                                            </tbody>
                                        </table>
                                    </div>
                                </section>
                            </div>
                        </div>
                    </section>
                </section>
            </section>
            
        </mat-dialog-content>

    </div>
    <div class="clearfix panel-footer">

        <button title="Annuler" (click)="onNoClick()" mat-raised-button color="primary" class="bg-gym shadow">
            Fermer</button>
        <button title="Annuler" *ngIf="distinct == 0" (click)="ValiderParticipant()" mat-raised-button
            color="success" class="pull-right shadow"> Valider les participants</button>
    </div>
</div>